!function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var i=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.collidingCell=n,this.residingCell=e};function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,i;return e=t,i=[{key:"fromString",value:function(e){var n=/\((-?\d+), (-?\d+)\)/.exec(e);return n||console.log({position:e}),new t(n[1],n[2])}}],(n=[{key:"topLeft",value:function(){return new t(this.x-1,this.y-1)}},{key:"top",value:function(){return new t(this.x,this.y-1)}},{key:"topRight",value:function(){return new t(this.x+1,this.y-1)}},{key:"left",value:function(){return new t(this.x-1,this.y)}},{key:"right",value:function(){return new t(this.x+1,this.y)}},{key:"bottomLeft",value:function(){return new t(this.x-1,this.y+1)}},{key:"bottom",value:function(){return new t(this.x,this.y+1)}},{key:"bottomRight",value:function(){return new t(this.x+1,this.y+1)}},{key:"toString",value:function(){return"(".concat(this.x,", ").concat(this.y,")")}}])&&r(e.prototype,n),i&&r(e,i),t}();function a(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function u(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.animated=!1,this.neighbours=[]}var e,n,i;return e=t,i=[{key:"dead",value:function(){return new t}},{key:"alive",value:function(){var e=new t;return e.animate(),e}}],(n=[{key:"tick",value:function(){return this.isAnimate()?this.tickWhenAnimate():this.tickWhenInanimate()}},{key:"tickWhenAnimate",value:function(){this.shouldDie()&&this.die()}},{key:"tickWhenInanimate",value:function(){this.shouldLive()&&this.animate()}},{key:"has3LiveNeighbours",value:function(){return 3===this.liveNeighbours.length}},{key:"isInanimate",value:function(){return!1===this.animated}},{key:"isAnimate",value:function(){return!0===this.animated}},{key:"animate",value:function(){this.animated=!0}},{key:"addNeighbours",value:function(t){this.neighbours=[].concat(a(this.neighbours),a(t))}},{key:"die",value:function(){this.animated=!1}},{key:"hasLessThan2LiveNeighbours",value:function(){return this.liveNeighbours.length<2}},{key:"hasMoreThan3LiveNeighbours",value:function(){return this.liveNeighbours.length>3}},{key:"shouldDie",value:function(){return this.hasLessThan2LiveNeighbours()||this.hasMoreThan3LiveNeighbours()}},{key:"shouldLive",value:function(){return this.has3LiveNeighbours()}},{key:"removeNeighbours",value:function(){this.neighbours=[]}},{key:"liveNeighbours",get:function(){return this.neighbours.filter(function(t){return t.isAnimate()})}}])&&u(e.prototype,n),i&&u(e,i),t}();var c=function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.topLeft=e,this.bottomRight=n};function l(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.grid=new Map,this.bottomRight=e}var e,n,r;return e=t,(n=[{key:"seed",value:function(t){var e=this;t.forEach(function(t){e.seedCell(t,e.emptyPositionInRange())}),console.log("seeded!")}},{key:"tick",value:function(){for(var t=new Map,e=this.boundaries,n=e.topLeft.y;n<=e.bottomRight.y;n++)for(var i=e.topLeft.x;i<=e.bottomRight.x;i++)this.tickCell(i,n,t);this.grid=t}},{key:"tickCell",value:function(t,e,n){var i=new o(t,e),r=this.cellAt(i),a=new s;r.isAnimate()&&a.animate(),a.addNeighbours(this.neighboursOf(i)),a.tick(),a.removeNeighbours(),a.isAnimate()&&n.set(i.toString(),a)}},{key:"emptyPositionInRange",value:function(){var t;do{t=this.positionInRange()}while(this.grid.has(t.toString()));return t}},{key:"seedCell",value:function(t,e){var n=e.toString();if(this.grid.has(n))throw new i(this.grid.get(n),t);this.grid.set(n,t)}},{key:"cellAt",value:function(t){var e=t.toString();return this.grid.get(e)||s.dead()}},{key:"positionInRange",value:function(){var t=Math.floor(Math.random()*this.bottomRight.x),e=Math.floor(Math.random()*this.bottomRight.y);return new o(t,e)}},{key:"neighboursOf",value:function(t){var e=s.dead();return[this.grid.get(t.topLeft().toString())||e,this.grid.get(t.top().toString())||e,this.grid.get(t.topRight().toString())||e,this.grid.get(t.left().toString())||e,this.grid.get(t.right().toString())||e,this.grid.get(t.bottomLeft().toString())||e,this.grid.get(t.bottom().toString())||e,this.grid.get(t.bottomRight().toString())||e]}},{key:"cells",get:function(){return Array.from(this.grid.values())}},{key:"boundaries",get:function(){var t=Array.from(this.grid.keys(),function(t){return o.fromString(t)}),e=function(t,e){return Math.min(t,e)},n=function(t,e){return Math.max(t,e)},i=t.map(function(t){return t.y}).reduce(e),r=t.map(function(t){return t.x}).reduce(e),a=t.map(function(t){return t.y}).reduce(n),u=t.map(function(t){return t.x}).reduce(n);return new c(new o(r-1,i-1),new o(u+1,a+1))}}])&&l(e.prototype,n),r&&l(e,r),t}();function f(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=e.getContext("2d"),this.context.scale(5,5)}var e,n,i;return e=t,(n=[{key:"print",value:function(t,e){for(var n=e.topLeft.y;n<=e.bottomRight.y;n++)for(var i=e.topLeft.x;i<=e.bottomRight.x;i++){var r=t.cellAt(new o(i,n));this.context.fillStyle=r.isAnimate()?"black":"white",this.context.fillRect(i,n,1,1)}}}])&&f(e.prototype,n),i&&f(e,i),t}(),v=new h(new o(99,99));new o(1,0),new o(2,1),new o(0,2),new o(1,2),new o(2,2);v.seed(Array.from({length:5e3},function(){return s.alive()}));var y=document.getElementById("the-canvas"),d=new c(new o(0,0),new o(y.width-1,y.height-1));console.log(d);var m=new g(y);console.log({world:v,canvas:m,viewport:d}),m.print(v,d);var b=null;document.getElementById("start-btn").addEventListener("click",function(){!function t(){v.tick(),m.print(v,d),b=requestAnimationFrame(t)}()}),document.getElementById("stop-btn").addEventListener("click",function(){cancelAnimationFrame(b)}),document.getElementById("tick-btn").addEventListener("click",function(){v.tick(),m.print(v,d)})}]);
//# sourceMappingURL=main.js.map